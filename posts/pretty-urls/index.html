<!doctype html><html lang=en><head><title>Pretty Urls :: paregis.me - just another personal projects website</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="In this post, we will change the build script to make the URL that we type in the browser more convenient and intuitive for us humans to read, in other words &#34;prettier&#34;."><meta name=keywords content="networking,wireless,engineering,cybersecurity,web development,python,javascript"><meta name=robots content="noodp"><link rel=canonical href=/posts/pretty-urls/><link rel=stylesheet href=/assets/style.css><link rel=stylesheet href=/assets/yellow.css><link rel=apple-touch-icon href=/img/apple-touch-icon-192x192.png><link rel="shortcut icon" href=/favicon.ico><meta name=twitter:card content="summary"><meta name=twitter:site content="www.paregis.me"><meta name=twitter:creator content><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="og:title" content="Pretty Urls"><meta property="og:description" content="In this post, we will change the build script to make the URL that we type in the browser more convenient and intuitive for us humans to read, in other words &#34;prettier&#34;."><meta property="og:url" content="/posts/pretty-urls/"><meta property="og:site_name" content="paregis.me - just another personal projects website"><meta property="og:image" content="/favicon.ico"><meta property="og:image:width" content="2048"><meta property="og:image:height" content="1024"><meta property="article:section" content="Tutorial"><meta property="article:published_time" content="2021-11-12 00:00:01 -0500 -0500"></head><body class=yellow><div class="container center headings--one-size"><header class=header><div class=header__inner><div class=header__logo><a href=/><div class=logo>paregis.me</div></a></div><div class=menu-trigger>menu</div></div><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a href=/>Home</a></li><li><a href=/about/>About</a></li><li><a href=/teaching/>Teaching</a></li><li><a href=/publications/>Publications</a></li></ul><ul class="menu__inner menu__inner--mobile"><li><a href=/>Home</a></li><li><a href=/about/>About</a></li><li><a href=/teaching/>Teaching</a></li><li><a href=/publications/>Publications</a></li></ul></nav></header><div class=content><div class=post><h1 class=post-title><a href=/posts/pretty-urls/>Pretty Urls</a></h1><div class=post-meta><span class=post-date>2021-11-12</span></div><div class=post-content><div><h2 id=table-of-content>Table of content<a href=#table-of-content class=hanchor arialabel=Anchor>&#8983;</a></h2><ul><li><a href=#table-of-content>Table of content</a></li><li><a href=#previously>Previously</a></li><li><a href=#the-output-folder-and-the-url>The output folder and the URL</a></li><li><a href=#changing-the-output-path>Changing the output path</a></li><li><a href=#clean-the-house-after-playing>Clean the house after playing</a></li><li><a href=#summary>Summary</a></li></ul><h2 id=previously>Previously<a href=#previously class=hanchor arialabel=Anchor>&#8983;</a></h2><p>In the last post we separated the data into its own separate file, the <code>data.py</code>. We modified the build script to load the data from this new file, and combine it with the templates to generate html pages in the build folder. In this post, we will change the build script to make the url that we type in the browser more convenient and intuitive, or &ldquo;prettier&rdquo;.</p><h2 id=the-output-folder-and-the-url>The output folder and the URL<a href=#the-output-folder-and-the-url class=hanchor arialabel=Anchor>&#8983;</a></h2><p>Right now, the build script is generating files directly into the <code>/_site</code> build directory. After building the pages, we can start the http server with the command:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>python -m http.server --directory ./_site/
</span></span></code></pre></div><p>Then, with the server running, I can checkout the pages in my browser by typing in the address bar <code>localhost:8000</code>. And if I want to check out the <code>teaching.html</code> page specifically, I can go to <code>localhost:8000/teaching.html</code>. That&rsquo;s cool and all, but we can do better.</p><p>Most websites today will have pretty URLs, which are URL addresses that are easier for people in general to memorize. In our case, for example, instead of having that <code>html</code> dangling on the back of the url, we could make the URL look like <code>localhost:8000/teaching</code> which is much nicer to look at.</p><p>If you ever dealt with some fancy framework like <del>React</del>, <del>Angular</del>, <del>Vue</del>, or Svelte&mldr; they require some substantial learning in order to make this pretty URLs happen. But we are going for fast and easy, right? All we need to know is that when you hit enter after typing an address in your browser, the webserver will look for specific files on the other side.</p><p>For example, when you enter <code>localhost:8000</code> your browser will ask the webserver for a webpage, which happens to be running on your own machine, you know, that &ldquo;http server&rdquo; from python. That webserver, because you configured it to point to the <code>/_site</code> folder, will look for the pages to send back to the requesting browser. Now, here&rsquo;s the thing, if the address is a folder-like address (<code>localhost:8000</code> points to <code>/_site</code>), then the webserver will, by default, look for an <code>index.html</code> file in that folder, and return its contents to the browser. It&rsquo;s the same as entering <code>localhost:8000/index.html</code>.</p><p>Why is this so important and revolutionary? Well, it&rsquo;s not, but now that we know that, we can use that default behavior to our benefit. To have pretty URLs in our static website, all we have to do is create the paths as folders in our build directory, and create <code>index.html</code> files for each of those sub folders.</p><p>To give an example, in the <code>/_site</code> folder we will have an <code>index.html</code>, and that will be the front page of the website. Then we will have a subfolder <code>/_site/teaching/</code> and inside that subfolder we will have an <code>index.html</code>. Then when a request comes asking for the <code>localhost:8000/teaching/</code>, the server will be forced to return back the <code>index.html</code> file in that subfolder. All of this is to say, our output files will all be named <code>index.html</code>, but they&rsquo;ll each be placed inside a subfolder inside the <code>/_site</code> build directory.</p><p>The change will look something like this:</p><ul><li><p>From:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>/path/to/project/
</span></span><span style=display:flex><span>    |-...other files
</span></span><span style=display:flex><span>    |-_site/
</span></span><span style=display:flex><span>        |-about.html
</span></span><span style=display:flex><span>        |-teaching.html
</span></span></code></pre></div></li><li><p>To:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>/path/to/project/
</span></span><span style=display:flex><span>    |-...other files
</span></span><span style=display:flex><span>    |-_site/
</span></span><span style=display:flex><span>        |-about/
</span></span><span style=display:flex><span>            |-index.html
</span></span><span style=display:flex><span>        |-teaching/
</span></span><span style=display:flex><span>            |index.html
</span></span></code></pre></div></li></ul><h2 id=changing-the-output-path>Changing the output path<a href=#changing-the-output-path class=hanchor arialabel=Anchor>&#8983;</a></h2><p>That&rsquo;s a lot of talking, let&rsquo;s get our hands dirty. Let&rsquo;s work on the <code>build.py</code> script. More specifically the teaching part of the script. This is the current script:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>o <span style=color:#f92672>=</span> Path<span style=color:#f92672>.</span>cwd()
</span></span><span style=display:flex><span>o <span style=color:#f92672>=</span> o <span style=color:#f92672>/</span> Path(<span style=color:#e6db74>&#39;_site/teaching.html&#39;</span>)
</span></span></code></pre></div><p>We will need to change it to look like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>o <span style=color:#f92672>=</span> Path<span style=color:#f92672>.</span>cwd()
</span></span><span style=display:flex><span>o <span style=color:#f92672>=</span> o <span style=color:#f92672>/</span> Path(<span style=color:#e6db74>&#34;_site/teaching&#34;</span>)
</span></span><span style=display:flex><span>o<span style=color:#f92672>.</span>mkdir(parents<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>, exist_ok<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>)
</span></span><span style=display:flex><span>o <span style=color:#f92672>=</span> o <span style=color:#f92672>/</span> Path(<span style=color:#e6db74>&#39;index.html&#39;</span>)
</span></span></code></pre></div><p>Notice how we break down the variable &lsquo;o&rsquo; a little bit. If we simply used the entire path to the <code>index.html</code> (for example: <code>o = Path("_site/teaching/index.html")</code>), then python would have crashed/raised an exception, because the subfolder <code>/teaching</code> doesn&rsquo;t exist. That&rsquo;s why we have a call to <code>o.mkdir(parents=True, exist_ok=True)</code> in between, which creates any folder in the path that doesn&rsquo;t exist already.</p><p><em>Note: if you call <code>o.mkdir(parents=True, exist_ok=True)</code>, and the path ends with <code>index.html</code>, it will treach that <code>index.html</code> as a folder, and not a file.</em></p><p>Now when you run the build script (<code>python build.py</code>), it will create the subfolder, and write to a file in there. Then, if you start the http server, and go to the url localhost:8000/teaching you will see the <code>index.html</code> that&rsquo;s inside that folder, and not the teaching.html file from before.</p><h2 id=clean-the-house-after-playing>Clean the house after playing<a href=#clean-the-house-after-playing class=hanchor arialabel=Anchor>&#8983;</a></h2><p>Which brings me to the last part of this article. You see how the <code>teaching.html</code> file is still hanging out in the build directory? In the build script, all we do is create new files, or overwrite existing ones! That&rsquo;s not good enough&mldr; we don&rsquo;t want that old garbage files that we created for testing purposes from previous steps, right? What I&rsquo;m going to do now is tell the build script to delete all files inside the build folder <code>/_site</code> before I even start generating the pages.</p><p>To do so, at the beginning of the build script, we will import another library that&rsquo;s already included with python, the <code>shutil</code>, it will help with deleting an entire folder and its content:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> shutil
</span></span></code></pre></div><p>Then let&rsquo;s create a couple of constant variables, just because we use it all throughout the rest of the build script, so if I decide to change the build directory I can change it in one place and not all over the script:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>BUILD_DIR <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;_site&#39;</span>
</span></span><span style=display:flex><span>CURRENT_PATH <span style=color:#f92672>=</span> Path<span style=color:#f92672>.</span>cwd()
</span></span><span style=display:flex><span>BUILD_PATH <span style=color:#f92672>=</span> CURRENT_PATH <span style=color:#f92672>/</span> Path(BUILD_DIR)
</span></span></code></pre></div><p>Then we can go ahead and delete the <code>/_site</code> from the project folder. Remember, this will be done everytime we run the build script, as part of the build process to clean up whatever the previous build was.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># remove current build</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>try</span>:
</span></span><span style=display:flex><span>    shutil<span style=color:#f92672>.</span>rmtree(BUILD_PATH)
</span></span><span style=display:flex><span><span style=color:#66d9ef>except</span> <span style=color:#a6e22e>FileNotFoundError</span>:
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>&#34;Build dir does not exist (yet).&#34;</span>)
</span></span></code></pre></div><p>And of course, now we need to recreate the build dir:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># make build dir</span>
</span></span><span style=display:flex><span>BUILD_PATH<span style=color:#f92672>.</span>mkdir(parents<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>, exist_ok<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>)
</span></span></code></pre></div><p>And now we will have a clean build every time we run the build script. The build script now will look like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> shutil
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> jinja2 <span style=color:#f92672>import</span> Environment, FileSystemLoader
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> pathlib <span style=color:#f92672>import</span> Path
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> data <span style=color:#f92672>import</span> teaching
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>BUILD_DIR <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;_site&#39;</span>
</span></span><span style=display:flex><span>CURRENT_PATH <span style=color:#f92672>=</span> Path<span style=color:#f92672>.</span>cwd()
</span></span><span style=display:flex><span>BUILD_PATH <span style=color:#f92672>=</span> CURRENT_PATH <span style=color:#f92672>/</span> Path(BUILD_DIR)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>file_loader <span style=color:#f92672>=</span> FileSystemLoader(<span style=color:#e6db74>&#39;templates&#39;</span>)
</span></span><span style=display:flex><span>env <span style=color:#f92672>=</span> Environment(loader<span style=color:#f92672>=</span>file_loader)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#e6db74>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>About
</span></span></span><span style=display:flex><span><span style=color:#e6db74>&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span><span style=color:#75715e># /about.html</span>
</span></span><span style=display:flex><span>template <span style=color:#f92672>=</span> env<span style=color:#f92672>.</span>get_template(<span style=color:#e6db74>&#39;about.html&#39;</span>)
</span></span><span style=display:flex><span>output <span style=color:#f92672>=</span> template<span style=color:#f92672>.</span>render(
</span></span><span style=display:flex><span>    title<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;About&#34;</span>,
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>o <span style=color:#f92672>=</span> BUILD_PATH <span style=color:#f92672>/</span> Path(<span style=color:#e6db74>&#34;about&#34;</span>)
</span></span><span style=display:flex><span>o<span style=color:#f92672>.</span>mkdir(parents<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>, exist_ok<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>)
</span></span><span style=display:flex><span>o <span style=color:#f92672>=</span> o <span style=color:#f92672>/</span> Path(<span style=color:#e6db74>&#39;index.html&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>with</span> o<span style=color:#f92672>.</span>open(mode<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;w&#39;</span>) <span style=color:#66d9ef>as</span> fh:
</span></span><span style=display:flex><span>    fh<span style=color:#f92672>.</span>write(output)
</span></span><span style=display:flex><span><span style=color:#e6db74>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>Teaching
</span></span></span><span style=display:flex><span><span style=color:#e6db74>&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span><span style=color:#75715e># /teaching.html</span>
</span></span><span style=display:flex><span>template <span style=color:#f92672>=</span> env<span style=color:#f92672>.</span>get_template(<span style=color:#e6db74>&#39;teaching.html&#39;</span>)
</span></span><span style=display:flex><span>output <span style=color:#f92672>=</span> template<span style=color:#f92672>.</span>render(
</span></span><span style=display:flex><span>    title<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Teaching&#34;</span>,
</span></span><span style=display:flex><span>    universities<span style=color:#f92672>=</span>teaching
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>o <span style=color:#f92672>=</span> BUILD_PATH <span style=color:#f92672>/</span> Path(<span style=color:#e6db74>&#34;teaching&#34;</span>)
</span></span><span style=display:flex><span>o<span style=color:#f92672>.</span>mkdir(parents<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>, exist_ok<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>)
</span></span><span style=display:flex><span>o <span style=color:#f92672>=</span> o <span style=color:#f92672>/</span> Path(<span style=color:#e6db74>&#39;index.html&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>with</span> o<span style=color:#f92672>.</span>open(mode<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;w&#39;</span>) <span style=color:#66d9ef>as</span> fh:
</span></span><span style=display:flex><span>    fh<span style=color:#f92672>.</span>write(output)
</span></span></code></pre></div><p>Now, if you build and serve, you can navigate to the pretty URLs <code>localhost:8000/teaching</code>.</p><h2 id=summary>Summary<a href=#summary class=hanchor arialabel=Anchor>&#8983;</a></h2><p>In this article we:</p><ul><li>Created subfolders inside the build folder, one for each web page</li><li>Modified the build script to output each page in a different subfolder</li><li>Renamed all output files to <code>index.html</code>, which the webserver look for by default if no file is specifically requested</li><li>Ended up with prettier URLs while navigating the website</li></ul></div></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Read other posts</span><hr></div><div class=pagination__buttons><span class="button previous"><a href=/posts/attack-of-the-static-assets/><span class=button__icon>←</span>
<span class=button__text>Attack of the Static Assets</span></a></span>
<span class="button next"><a href=/posts/separating-data-from-the-rest/><span class=button__text>Separating Data From the Rest</span>
<span class=button__icon>→</span></a></span></div></div></div></div><footer class=footer><div class=footer__inner><div class="copyright copyright--user"><span>All rights preserved.</span></div></div></footer><script src=/assets/main.js></script>
<script src=/assets/prism.js></script></div></body></html>