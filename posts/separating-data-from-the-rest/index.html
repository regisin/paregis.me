<!doctype html><html lang=en><head><title>Separating Data From the Rest :: paregis.me - just another personal projects website</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Make the development process a little bit more productive by separating the data from the other parts of the website. Previously, the content of the webpages were either hard-coded into the templates themselves, or into the build script when passing values to the template. In this post, we give the data its own home."><meta name=keywords content="networking,wireless,engineering,cybersecurity,web development,python,javascript"><meta name=robots content="noodp"><link rel=canonical href=/posts/separating-data-from-the-rest/><link rel=stylesheet href=/assets/style.css><link rel=stylesheet href=/assets/yellow.css><link rel=apple-touch-icon href=/img/apple-touch-icon-192x192.png><link rel="shortcut icon" href=/favicon.ico><meta name=twitter:card content="summary"><meta name=twitter:site content="www.paregis.me"><meta name=twitter:creator content><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="og:title" content="Separating Data From the Rest"><meta property="og:description" content="Make the development process a little bit more productive by separating the data from the other parts of the website. Previously, the content of the webpages were either hard-coded into the templates themselves, or into the build script when passing values to the template. In this post, we give the data its own home."><meta property="og:url" content="/posts/separating-data-from-the-rest/"><meta property="og:site_name" content="paregis.me - just another personal projects website"><meta property="og:image" content="/favicon.ico"><meta property="og:image:width" content="2048"><meta property="og:image:height" content="1024"><meta property="article:section" content="Tutorial"><meta property="article:published_time" content="2021-11-11 00:00:01 -0500 -0500"></head><body class=yellow><div class="container center headings--one-size"><header class=header><div class=header__inner><div class=header__logo><a href=/><div class=logo>paregis.me</div></a></div><div class=menu-trigger>menu</div></div><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a href=/>Home</a></li><li><a href=/about/>About</a></li><li><a href=/teaching/>Teaching</a></li><li><a href=/publications/>Publications</a></li></ul><ul class="menu__inner menu__inner--mobile"><li><a href=/>Home</a></li><li><a href=/about/>About</a></li><li><a href=/teaching/>Teaching</a></li><li><a href=/publications/>Publications</a></li></ul></nav></header><div class=content><div class=post><h1 class=post-title><a href=/posts/separating-data-from-the-rest/>Separating Data From the Rest</a></h1><div class=post-meta><span class=post-date>2021-11-11</span></div><div class=post-content><div><h2 id=table-of-content>Table of content<a href=#table-of-content class=hanchor arialabel=Anchor>&#8983;</a></h2><ul><li><a href=#table-of-content>Table of content</a></li><li><a href=#recap>Recap</a></li><li><a href=#storytime>Storytime</a></li><li><a href=#creating-some-data>Creating some data</a></li><li><a href=#reading-the-data>Reading the data</a><ul><li><a href=#template-loops>Template loops</a></li></ul></li><li><a href=#summary>Summary</a></li></ul><h2 id=recap>Recap<a href=#recap class=hanchor arialabel=Anchor>&#8983;</a></h2><p>Previously, we have seen how to use Jinja2&rsquo;s template inheritance to build more consistent webpages. In this post, we will make our development process a little bit more productive (IMHO!) by separating the data from the other parts of the website.</p><p>If you have been following this tutorial series, you&rsquo;ll notice that the content of the webpages are either hardcoded into the templates themselves, or into the build script when passing values to the template. It&rsquo;s time to change that and give the data its own home.</p><h2 id=storytime>Storytime<a href=#storytime class=hanchor arialabel=Anchor>&#8983;</a></h2><p>A quick look back and some motivation is in place before we roll up our sleeves and get to work&mldr;</p><p>Let&rsquo;s look at what we have:</p><ul><li>a folder with a bunch of templates</li><li>a python script that reads each template, changes a little bit, then spits out into the <code>/_site</code> folder, the build folder</li></ul><p>If you notice, it doesn&rsquo;t really matter where our data comes from, right? Right now we have it coded into the build script (the <code>title</code> that we pass to the template). But we also have some information directly in the template files (the text in the <code>teaching.html</code> template):</p><ul><li><p>Source of <code>teaching.html</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>{% extends &#39;base.html&#39; %}
</span></span><span style=display:flex><span>{% block content %}
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>h1</span>&gt;{{ title }}&lt;<span style=color:#f92672>h1</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>h2</span>&gt;Southeastern Louisiana University&lt;/<span style=color:#f92672>h2</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>ul</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>li</span>&gt;Algorithm Design and Implementation II (CMPS 280) Spring 2020&lt;/<span style=color:#f92672>li</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>li</span>&gt;Special Topics in Information Technology (CMPS 494/594) Spring 2020&lt;/<span style=color:#f92672>li</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>ul</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>h2</span>&gt;University of Nevada-Reno&lt;/<span style=color:#f92672>h2</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>ul</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>li</span>&gt;Computer Communication Networks (CPE 400/600) Spring 2019&lt;/<span style=color:#f92672>li</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>ul</span>&gt;
</span></span><span style=display:flex><span>{% endblock %}
</span></span></code></pre></div></li><li><p>Snippet from `build.py:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>template <span style=color:#f92672>=</span> env<span style=color:#f92672>.</span>get_template(<span style=color:#e6db74>&#39;about.html&#39;</span>)
</span></span><span style=display:flex><span>output <span style=color:#f92672>=</span> template<span style=color:#f92672>.</span>render(
</span></span><span style=display:flex><span>    title<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;ABOUT ME&#34;</span> <span style=color:#75715e># Data `title` being passed to the template by the script</span>
</span></span><span style=display:flex><span>)
</span></span></code></pre></div></li></ul><p>If we are dealing with a couple of pages, sure, that can be manageable. But if there are several different pages, it can be quite annoying to have the information scattered throughout multiple different types of files.</p><p>But hey, we are using python and python can be modular. We can import python files from other python files!</p><p>Instead of having it all in the build script or template files, we can create python file that the only purpose is to store the data for our website. I want to say that again: it doesn&rsquo;t matter where your data comes from as long as we have access to it in our build script. You can have a database that you read from, you can crawl the web for the data.. If you can make the data into the build script somehow, you can pass it to the template to generate the final static pages.</p><p>For our intent and purpose, we will not be dealing with any database, any web crawler whatsoever. It&rsquo;s a simple static website after all, so we don&rsquo;t need a complex database server. We will use a separate python file where we will dump all of the information that will displayed in the website.</p><p>So without further ado, let&rsquo;s create a data file named <code>data.py</code> and put it in the same folder as the <code>build.py</code> script if you haven&rsquo;t already done it.</p><h2 id=creating-some-data>Creating some data<a href=#creating-some-data class=hanchor arialabel=Anchor>&#8983;</a></h2><p>So what does this data &ldquo;store&rdquo; look like? Data structures!</p><p>Most of the dynamic content that you see on the Internet are stored in tables. Well in python we don&rsquo;t have tables per se, but we have other things, like lists (<code>list</code>) and dictionaries (<code>dict</code>), and that&rsquo;s what we will be using to store the content. Which stuff should go on the datastore you ask? Well, let&rsquo;s take a look at what we have so far. In my case I&rsquo;m going to look at the <code>teaching.html</code> template, which has the following in the <code>{% block content %}</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>h2</span>&gt;Southeastern Louisiana University&lt;/<span style=color:#f92672>h2</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>ul</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>li</span>&gt;Algorithm Design and Implementation II (CMPS 280) Spring 2020&lt;/<span style=color:#f92672>li</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>li</span>&gt;Special Topics in Information Technology (CMPS 494/594) Spring 2020&lt;/<span style=color:#f92672>li</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>ul</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>h2</span>&gt;University of Nevada-Reno&lt;/<span style=color:#f92672>h2</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>ul</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>li</span>&gt;Computer Communication Networks (CPE 400/600) Spring 2019&lt;/<span style=color:#f92672>li</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>ul</span>&gt;
</span></span></code></pre></div><p>If you notice, there&rsquo;s a pattern there, I have a list of courses, and that list is associated with the university where I taught it. And each course also has a list of semesters when I taught them.</p><p>There are a couple of directions I can take with this, but I&rsquo;m going to keep it simple for now. However, in the future, changing the structure of the data can be easy, we just have to be savvy with how python works with it in the build script.</p><p>In my data file, I&rsquo;ll create a variable called <code>teaching</code>, this will be a list of dictionaries. Let&rsquo;s take a look at how it looks like:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>teaching <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#39;name&#39;</span>: <span style=color:#e6db74>&#39;Southeastern Louisiana University&#39;</span>,
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#39;courses&#39;</span>: [
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;Algorithm Design and Implementation II (CMPS 280) Spring 2020&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;Special Topics in Information Technology (CMPS 494/594) Spring 2020&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;Advanced Computer Networks (CMPS 161) Fall 2019&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;Introduction to Applied Networking (CMPS 209) Fall 2019&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;Algorithm Design and Implementation I (CMPS 161) Fall 2019&#34;</span>,
</span></span><span style=display:flex><span>            ]
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#39;name&#39;</span>: <span style=color:#e6db74>&#39;University of Nevada, Reno&#39;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#39;courses&#39;</span>: [
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#34;Computer Communication Networks (CPE 400/600) Spring 2019&#34;</span>,
</span></span><span style=display:flex><span>    ]
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>]
</span></span></code></pre></div><p>Each item in the teaching list will be a dictionary. And each dictionary will follow this pattern that I decided: each <code>dict</code> will have an key called <code>"name"</code> and the value will be the place where I taught the courses; each dictionary will then have yet another <code>list</code> of strings, in the key <code>"courses"</code>. Each string will be a course. And I will format this string the way that I want to see printed in the built page. This type of structured data looks a lot more like a <code>json</code> object, right? If you had this data in a sql database, you might have to deal with <code>JOIN</code> queries. I&rsquo;m not saying that&rsquo;s not possible, but for my tiny personal website, this is more than enough.</p><h2 id=reading-the-data>Reading the data<a href=#reading-the-data class=hanchor arialabel=Anchor>&#8983;</a></h2><p>Now that I have some data, I need to use it. Let&rsquo;s go to the <code>build.py</code> script. At the top we need to load the data from the newly created <code>data.py</code> file. We can do that like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> data <span style=color:#f92672>import</span> teaching
</span></span></code></pre></div><p>Notice that for any new data structure I add to the data store file, I can then import it by adding to that same <code>import</code> statement, just separate it with comma (<code>,</code>), like <code>from data import teaching, research_projects</code>.</p><p>Now in the <code>render()</code> call of the teaching page, I can pass the <code>teaching</code> list to the template:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>template <span style=color:#f92672>=</span> env<span style=color:#f92672>.</span>get_template(<span style=color:#e6db74>&#39;teaching.html&#39;</span>)
</span></span><span style=display:flex><span>output <span style=color:#f92672>=</span> template<span style=color:#f92672>.</span>render(
</span></span><span style=display:flex><span>    title<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Teaching&#34;</span>,
</span></span><span style=display:flex><span>    universities<span style=color:#f92672>=</span>teaching
</span></span><span style=display:flex><span>)
</span></span></code></pre></div><p>Notice that the name of the list and the parameter used by the template do not have to match. In this case, the template will be looking for the parameter called <code>universities</code> and not <code>teaching</code>. Speaking of templates, we have some work to do over there too.</p><p>Move over to the <code>teaching.html</code> template. We have to modify our template so it reads the values being passed to it, instead of printing the hard-coded ones.</p><h3 id=template-loops>Template loops<a href=#template-loops class=hanchor arialabel=Anchor>&#8983;</a></h3><p>It&rsquo;s time to learn another feature of jinja, the loops. If you have some experience with python, you will find this very intuitive. It&rsquo;s like a way of having a for loop inside the template. It may seem odd that we mix python code with html code, but this thing works wonders with lists. The template doesn&rsquo;t know how many courses I taught, so a <code>loop</code> is the perfect way of dealing with this.</p><p>In the template, let&rsquo;s make it more generic and remove all the hard coded stuff. Then add the loop blocks like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>{% extends &#39;base.html&#39; %}
</span></span><span style=display:flex><span>{% block content %}
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>h1</span>&gt;{{ title }}&lt;<span style=color:#f92672>h1</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    {% for university in universities %}
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>h2</span>&gt;{{ university.name }}&lt;/<span style=color:#f92672>h2</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>ul</span>&gt;
</span></span><span style=display:flex><span>        {% for course in university.courses %}
</span></span><span style=display:flex><span>            &lt;<span style=color:#f92672>li</span>&gt;{{ course }}&lt;/<span style=color:#f92672>li</span>&gt;
</span></span><span style=display:flex><span>        {% endfor %}
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>ul</span>&gt;
</span></span><span style=display:flex><span>    {% endfor %}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>{% endblock %}
</span></span></code></pre></div><p>It is a generalized template that we created from the hard-coded one, right? Well, look at that, we can have nested loops in the template, and that works just fine. The syntax is very similar to the python syntax. The main difference is that we need the <code>{% endfor %}</code> block to tell jinja which part of the <code>html</code> code will repeat and when to stop the repetition. We can access the inner fields using the dot-notation</p><p>Now all that&rsquo;s left to do is run the build script and checkout the generated webpages:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>python built.py
</span></span><span style=display:flex><span>python3 -m http.server --directory ./_site
</span></span></code></pre></div><p>Then navigate in your browser to <code>localhost:8000/teaching.html</code>, <em>Ta-Da</em>!</p><p><p><picture><source media="(max-width: 376px)" srcset=/posts/separating-data-from-the-rest/images/Screen_Shot_2021_11_11_at_11_19_23_bb658d57f2_hu2301602a29be7ec7ca5ea683d9dcedeb_107638_500x0_resize_box_3.png><source media="(max-width: 992px)" srcset><source media="(max-width: 1400px)" srcset><source media="(min-width: 1600px)" srcset><img alt="Serving the website" title="Serving the website" src=images/Screen_Shot_2021_11_11_at_11_19_23_bb658d57f2.png></picture></p></p><p>You can use the for loops just like you would in the python code. They are great for tabular data like this courses example.</p><h2 id=summary>Summary<a href=#summary class=hanchor arialabel=Anchor>&#8983;</a></h2><p>Here&rsquo;s a summary of what we did:</p><ul><li>Created data structures in a separate file <code>data.py</code></li><li>Populated the data structure lists with actual useful data</li><li>Imported the data in the <code>build.py</code> script</li><li>Injected the data into the template through the template engine</li><li>Rendered pages by combining templates and data</li></ul></div></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Read other posts</span><hr></div><div class=pagination__buttons><span class="button previous"><a href=/posts/pretty-urls/><span class=button__icon>←</span>
<span class=button__text>Pretty Urls</span></a></span>
<span class="button next"><a href=/posts/creating-templates/><span class=button__text>Creating Templates</span>
<span class=button__icon>→</span></a></span></div></div></div></div><footer class=footer><div class=footer__inner><div class="copyright copyright--user"><span>All rights preserved.</span></div></div></footer><script src=/assets/main.js></script>
<script src=/assets/prism.js></script></div></body></html>